name: 喵咒·AI Spellbook
package: cloud.lazycat.app.aispellbook
version: 1.1.0
description: 用公式组合出无限变化的AI提示词
author: CATxPAPA

application:
  multi_instance: true
  subdomain: aispellbook
  workdir: /lzcapp/pkg/content/
  
  routes:
    # 静态文件路由
    - /=file:///lzcapp/pkg/content/web/
    # - /css/=file:///lzcapp/pkg/content/web/css/
    # - /js/=file:///lzcapp/pkg/content/web/js/
    # - /test=file:///lzcapp/pkg/content/web/test.html

  upstreams:
    # API后端服务
    - location: /api/
      workdir: /lzcapp/pkg/content/backend/
      backend: http://127.0.0.1:3000/api/
      backend_launch_command: |
        cd /lzcapp/pkg/content/backend
        apk update
        apk add nodejs npm
        mkdir -p /lzcapp/var/data
        mkdir -p /lzcapp/var/uploads
        mkdir -p /lzcapp/cache/temp
        cp -f /lzcapp/pkg/content/backend/data/init.json /lzcapp/var/data/
        npm start

  # 文件关联配置（预留）
  # file_handler:
  #   mime:
  #     - application/json
  #     - text/plain
  #   actions:
  #     open: /open?file=%u

